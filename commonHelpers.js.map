{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('#loader')\nsearchForm.addEventListener('submit', searchImages);\n\nlet imageViewer;\n\nfunction searchImages(event) {\n    event.preventDefault();\n    galleryList.innerHTML = '';\n    loader.classList.add('loader');\n    const searchInput = document.querySelector('.search-input');\n\n  fetchImages(searchInput.value)\n      .then(data => {\n        if (data.hits.length === 0) {\n            iziToast.error({\n            title: '',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight'\n});\n    }\n        galleryList.innerHTML = createMarkup(data.hits);\n            imageViewer = new SimpleLightbox('.gallery-link', {\n            captionDelay: 250,\n            captionsData: 'alt', \n        }); \n      })\n    .catch(error => {\n            iziToast.error({\n                title: '',\n                message: error.message,\n                position: 'topRight'\n            });\n    })\n      .finally(() => {\n        searchForm.reset();\n        loader.classList.remove('loader');\n        imageViewer.refresh();\n      })\n};\n\nfunction fetchImages(query) {\n    const API_KEY = '42343385-eb6c059581ee4f8bb4ee68ac0';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    return fetch(`${BASE_URL}?${params}`)\n        .then(response => {\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status}`);\n            }\n            return response.json();\n    })\n};\nfunction createMarkup(arr) {\n  return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n  <li class=\"gallery-item\">\n  <a href=\"${largeImageURL}\" class=\"${\"gallery-link\"}\">\n      <img src=\"${webformatURL}\" \n           alt=\"${tags}\" \n           class=\"gallery-image\"\n           loading=\"lazy\" \n           width=\"250\"\n           height=\"250\">\n      <div>\n        <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n        <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n        <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n        <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n  </div>\n</a>\n</li>\n`).join('');\n};"],"names":["searchForm","galleryList","loader","searchImages","imageViewer","event","searchInput","fetchImages","data","iziToast","createMarkup","SimpleLightbox","error","query","API_KEY","BASE_URL","params","response","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EAC/CF,EAAW,iBAAiB,SAAUG,CAAY,EAElD,IAAIC,EAEJ,SAASD,EAAaE,EAAO,CACzBA,EAAM,eAAc,EACpBJ,EAAY,UAAY,GACxBC,EAAO,UAAU,IAAI,QAAQ,EAC7B,MAAMI,EAAc,SAAS,cAAc,eAAe,EAE5DC,EAAYD,EAAY,KAAK,EACxB,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,GACrBC,EAAS,MAAM,CACf,MAAO,GACP,QAAS,2EACT,SAAU,UACtB,CAAC,EAEOR,EAAY,UAAYS,EAAaF,EAAK,IAAI,EAC1CJ,EAAc,IAAIO,EAAe,gBAAiB,CAClD,aAAc,IACd,aAAc,KAC1B,CAAS,CACT,CAAO,EACF,MAAMC,GAAS,CACRH,EAAS,MAAM,CACX,MAAO,GACP,QAASG,EAAM,QACf,SAAU,UAC1B,CAAa,CACb,CAAK,EACE,QAAQ,IAAM,CACbZ,EAAW,MAAK,EAChBE,EAAO,UAAU,OAAO,QAAQ,EAChCE,EAAY,QAAO,CAC3B,CAAO,CACP,CAEA,SAASG,EAAYM,EAAO,CACxB,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,GAAGE,CAAQ,IAAIC,CAAM,EAAE,EAC/B,KAAKC,GAAY,CAClB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,UAAUA,EAAS,MAAM,EAAE,EAE3C,OAAOA,EAAS,MAC5B,CAAK,CACL,CACA,SAASP,EAAaQ,EAAK,CACzB,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,aAElFL,CAAa;AAAA,kBACRD,CAAY;AAAA,kBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iEAM2CC,CAAK;AAAA,iEACLC,CAAK;AAAA,oEACFC,CAAQ;AAAA,qEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,CAI7E,EAAE,KAAK,EAAE,CACV"}